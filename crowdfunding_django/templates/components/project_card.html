{% load static %}

<div class="project-card">
  <div class="project-card__image">
    {% if project.image %}
    <img
      src="{{ project.image.url }}"
      alt="{{ project.title }}"
      loading="lazy"
    />
    {% else %}
    <div class="project-card__placeholder">
      <i class="fas fa-lightbulb"></i>
    </div>
    {% endif %}
    <span
      class="project-card__status status-{{ project.campaign_status|lower }}"
      >{{ project.campaign_status }}</span
    >
  </div>

  <div class="project-card__body">
    <h3 class="project-card__title">
      <a href="{% url 'projects:detail' project.pk %}" class="stretched-link"
        >{{ project.title }}</a
      >
    </h3>
    <p class="project-card__description">
      {{ project.details|truncatechars:140 }}
    </p>

    <div class="project-card__meta">
      <div>
        <span class="label">Target</span>
        <span class="value">${{ project.total_target|floatformat:0 }}</span>
      </div>
      <div>
        <span class="label">Raised</span>
        <span class="value">${{ project.current_amount|floatformat:0 }}</span>
      </div>
      <div>
        <span class="label">Days Left</span>
        <span class="value">{{ project.days_left }}</span>
      </div>
    </div>

    <div class="project-card__progress">
      <div class="progress">
        <div
          class="progress-fill"
          style="width: {{ project.funding_percentage|floatformat:0|default:0 }}%"
        ></div>
      </div>
      <span class="progress-value"
        >{{ project.funding_percentage|floatformat:0 }}% funded</span
      >
    </div>

    <div class="project-card__footer">
      <div class="owner">
        <span class="owner-avatar"
          >{{
          project.owner.first_name|default:project.owner.email|slice:':1'|upper
          }}</span
        >
        <div>
          <small class="label">Owner</small>
          <div class="value">
            {{ project.owner.get_full_name|default:project.owner.email }}
          </div>
        </div>
      </div>
      <div class="actions">
        <a href="{% url 'projects:detail' project.pk %}" class="btn btn-view">
          <i class="fas fa-eye"></i>
          View
        </a>
        {% if project.is_active and project.owner != user %}
        <a
          href="{% url 'projects:contribute' project.pk %}"
          class="btn btn-support"
        >
          <i class="fas fa-heart"></i>
          Support
        </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{# Styles moved to static/css/main.css to avoid duplication when including this
component #}
